# Generated by default/object.tt
package Paws::ACMPCA::CrlConfiguration;
  use Moose;
  has CrlDistributionPointExtensionConfiguration => (is => 'ro', isa => 'Paws::ACMPCA::CrlDistributionPointExtensionConfiguration');
  has CrlType => (is => 'ro', isa => 'Str');
  has CustomCname => (is => 'ro', isa => 'Str');
  has CustomPath => (is => 'ro', isa => 'Str');
  has Enabled => (is => 'ro', isa => 'Bool', required => 1);
  has ExpirationInDays => (is => 'ro', isa => 'Int');
  has S3BucketName => (is => 'ro', isa => 'Str');
  has S3ObjectAcl => (is => 'ro', isa => 'Str');

1;

### main pod documentation begin ###

=head1 NAME

Paws::ACMPCA::CrlConfiguration

=head1 USAGE

This class represents one of two things:

=head3 Arguments in a call to a service

Use the attributes of this class as arguments to methods. You shouldn't make instances of this class. 
Each attribute should be used as a named argument in the calls that expect this type of object.

As an example, if Att1 is expected to be a Paws::ACMPCA::CrlConfiguration object:

  $service_obj->Method(Att1 => { CrlDistributionPointExtensionConfiguration => $value, ..., S3ObjectAcl => $value  });

=head3 Results returned from an API call

Use accessors for each attribute. If Att1 is expected to be an Paws::ACMPCA::CrlConfiguration object:

  $result = $service_obj->Method(...);
  $result->Att1->CrlDistributionPointExtensionConfiguration

=head1 DESCRIPTION

Contains configuration information for a certificate revocation list
(CRL). Your private certificate authority (CA) creates base CRLs. Delta
CRLs are not supported. You can enable CRLs for your new or an existing
private CA by setting the B<Enabled> parameter to C<true>. Your private
CA writes CRLs to an S3 bucket that you specify in the B<S3BucketName>
parameter. You can hide the name of your bucket by specifying a value
for the B<CustomCname> parameter. Your private CA by default copies the
CNAME or the S3 bucket name to the B<CRL Distribution Points> extension
of each certificate it issues. If you want to configure this default
behavior to be something different, you can set the
B<CrlDistributionPointExtensionConfiguration> parameter. Your S3 bucket
policy must give write permission to Amazon Web Services Private CA.

Amazon Web Services Private CA assets that are stored in Amazon S3 can
be protected with encryption. For more information, see Encrypting Your
CRLs
(https://docs.aws.amazon.com/privateca/latest/userguide/crl-planning.html#crl-encryption).

Your private CA uses the value in the B<ExpirationInDays> parameter to
calculate the B<nextUpdate> field in the CRL. The CRL is refreshed
prior to a certificate's expiration date or when a certificate is
revoked. When a certificate is revoked, it appears in the CRL until the
certificate expires, and then in one additional CRL after expiration,
and it always appears in the audit report.

A CRL is typically updated approximately 30 minutes after a certificate
is revoked. If for any reason a CRL update fails, Amazon Web Services
Private CA makes further attempts every 15 minutes.

CRLs contain the following fields:

=over

=item *

B<Version>: The current version number defined in RFC 5280 is V2. The
integer value is 0x1.

=item *

B<Signature Algorithm>: The name of the algorithm used to sign the CRL.

=item *

B<Issuer>: The X.500 distinguished name of your private CA that issued
the CRL.

=item *

B<Last Update>: The issue date and time of this CRL.

=item *

B<Next Update>: The day and time by which the next CRL will be issued.

=item *

B<Revoked Certificates>: List of revoked certificates. Each list item
contains the following information.

=over

=item *

B<Serial Number>: The serial number, in hexadecimal format, of the
revoked certificate.

=item *

B<Revocation Date>: Date and time the certificate was revoked.

=item *

B<CRL Entry Extensions>: Optional extensions for the CRL entry.

=over

=item *

B<X509v3 CRL Reason Code>: Reason the certificate was revoked.

=back

=back

=item *

B<CRL Extensions>: Optional extensions for the CRL.

=over

=item *

B<X509v3 Authority Key Identifier>: Identifies the public key
associated with the private key used to sign the certificate.

=item *

B<X509v3 CRL Number:>: Decimal sequence number for the CRL.

=back

=item *

B<Signature Algorithm>: Algorithm used by your private CA to sign the
CRL.

=item *

B<Signature Value>: Signature computed over the CRL.

=back

Certificate revocation lists created by Amazon Web Services Private CA
are DER-encoded. You can use the following OpenSSL command to list a
CRL.

C<openssl crl -inform DER -text -in I<crl_path> -noout>

For more information, see Planning a certificate revocation list (CRL)
(https://docs.aws.amazon.com/privateca/latest/userguide/crl-planning.html)
in the I<Amazon Web Services Private Certificate Authority User Guide>

=head1 ATTRIBUTES


=head2 CrlDistributionPointExtensionConfiguration => L<Paws::ACMPCA::CrlDistributionPointExtensionConfiguration>

Configures the behavior of the CRL Distribution Point extension for
certificates issued by your certificate authority. If this field is not
provided, then the CRl Distribution Point Extension will be present and
contain the default CRL URL.


=head2 CrlType => Str

Specifies whether to create a complete or partitioned CRL. This setting
determines the maximum number of certificates that the certificate
authority can issue and revoke. For more information, see Amazon Web
Services Private CA quotas.

=over

=item *

C<COMPLETE> - The default setting. Amazon Web Services Private CA
maintains a single CRL le for all unexpired certicates issued by a CA
that have been revoked for any reason. Each certicate that Amazon Web
Services Private CA issues is bound to a specic CRL through its CRL
distribution point (CDP) extension, dened in RFC 5280
(https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.9).

=item *

C<PARTITIONED> - Compared to complete CRLs, partitioned CRLs
dramatically increase the number of certicates your private CA can
issue.

When using partitioned CRLs, you must validate that the CRL's
associated issuing distribution point (IDP) URI matches the certicate's
CDP URI to ensure the right CRL has been fetched. Amazon Web Services
Private CA marks the IDP extension as critical, which your client must
be able to process.

=back



=head2 CustomCname => Str

Name inserted into the certificate B<CRL Distribution Points> extension
that enables the use of an alias for the CRL distribution point. Use
this value if you don't want the name of your S3 bucket to be public.

The content of a Canonical Name (CNAME) record must conform to RFC2396
(https://www.ietf.org/rfc/rfc2396.txt) restrictions on the use of
special characters in URIs. Additionally, the value of the CNAME must
not include a protocol prefix such as "http://" or "https://".


=head2 CustomPath => Str

Designates a custom le path in S3 for CRL(s). For example,
C<http://E<lt>CustomNameE<gt>/
E<lt>CustomPathE<gt>/E<lt>CrlPartition_GUIDE<gt>.crl>.


=head2 B<REQUIRED> Enabled => Bool

Boolean value that specifies whether certificate revocation lists
(CRLs) are enabled. You can use this value to enable certificate
revocation for a new CA when you call the CreateCertificateAuthority
(https://docs.aws.amazon.com/privateca/latest/APIReference/API_CreateCertificateAuthority.html)
action or for an existing CA when you call the
UpdateCertificateAuthority
(https://docs.aws.amazon.com/privateca/latest/APIReference/API_UpdateCertificateAuthority.html)
action.


=head2 ExpirationInDays => Int

Validity period of the CRL in days.


=head2 S3BucketName => Str

Name of the S3 bucket that contains the CRL. If you do not provide a
value for the B<CustomCname> argument, the name of your S3 bucket is
placed into the B<CRL Distribution Points> extension of the issued
certificate. You can change the name of your bucket by calling the
UpdateCertificateAuthority
(https://docs.aws.amazon.com/privateca/latest/APIReference/API_UpdateCertificateAuthority.html)
operation. You must specify a bucket policy
(https://docs.aws.amazon.com/privateca/latest/userguide/PcaCreateCa.html#s3-policies)
that allows Amazon Web Services Private CA to write the CRL to your
bucket.

The C<S3BucketName> parameter must conform to the S3 bucket naming
rules
(https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html).


=head2 S3ObjectAcl => Str

Determines whether the CRL will be publicly readable or privately held
in the CRL Amazon S3 bucket. If you choose PUBLIC_READ, the CRL will be
accessible over the public internet. If you choose
BUCKET_OWNER_FULL_CONTROL, only the owner of the CRL S3 bucket can
access the CRL, and your PKI clients may need an alternative method of
access.

If no value is specified, the default is C<PUBLIC_READ>.

I<Note:> This default can cause CA creation to fail in some
circumstances. If you have have enabled the Block Public Access (BPA)
feature in your S3 account, then you must specify the value of this
parameter as C<BUCKET_OWNER_FULL_CONTROL>, and not doing so results in
an error. If you have disabled BPA in S3, then you can specify either
C<BUCKET_OWNER_FULL_CONTROL> or C<PUBLIC_READ> as the value.

For more information, see Blocking public access to the S3 bucket
(https://docs.aws.amazon.com/privateca/latest/userguide/PcaCreateCa.html#s3-bpa).



=head1 SEE ALSO

This class forms part of L<Paws>, describing an object used in L<Paws::ACMPCA>

=head1 BUGS and CONTRIBUTIONS

The source code is located here: L<https://github.com/pplu/aws-sdk-perl>

Please report bugs to: L<https://github.com/pplu/aws-sdk-perl/issues>

=cut

